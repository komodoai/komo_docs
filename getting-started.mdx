---
title: "Getting Started"
---

Komodo AI can run your jobs on various backends. The choice of backend is yours - we strive to provide the same seamless experience regardless of your choice.


<Steps>
  <Step title="Install Komodo CLI">
    ```bash
    pip install komo
    ```
  </Step>
  <Step title="Register a new account">
    ```bash
    komo register
    ```
  </Step>
  <Step title="Create the Komodo API key">
    The Komodo API key is used to authenticate to the Komodo API.
    
    ```bash
    komo api-key create
    ```
  </Step>
  <Step title="Setup your compute infrastructure">
    There are several different types of compute services that are supported. Follow the instructions for each type of compute service you'd like to use.
    <Accordion title="Local">
        To run jobs locally, you just need to make sure you have Docker [installed](https://docs.docker.com/engine/install/) and running.
    </Accordion>
    <Accordion title="Kubernetes">
        <Note>We don't recommend using Kubernetes if you need support for autoscaling AND multi-node distributed training.
        This is because we use [Volcano](https://volcano.sh/en/) as our gang scheduler for multi-node jobs, which doesn't
        work well with autoscalers.</Note>
        If you plan on using Kubernetes on AWS EKS, we currently support automatically setting up your infrastructure 
        with Terraform using the [komo compute create](./komo-cli-reference/command/compute/create) command.
        
        Once the command finishes running, it will output some information that you'll need for the next step.

        <Info>Support for creating clusters on other cloud services such as GCP GKE is coming soon.</Info>

        If you'd rather bring over an existing Kubernetes cluster, follow the steps below to prepare it for use with Komodo.

        <Tip>
            If you need help with the steps below, reach out to someone on the Platform
            team in your organization or let us know and we'll be happy to work with you
            to get this set up!
        </Tip>

        <Accordion title="Install Volcano" icon="volcano">
            Komodo uses [Volcano](https://volcano.sh/en/) to schedule workloads on your Kubernetes cluster.

            Install Volcano by following the appropriate instructions in the [Volcano README](https://github.com/volcano-sh/volcano#readme).
        </Accordion>

        <Accordion title="Create Komodo Resources" icon="dragon">
            Komodo uses isolated resources to schedule workloads on your cluster. In this section we will configure these resources.

            **Create Komodo Cluster Role**

            ```bash
            kubectl apply -f https://raw.githubusercontent.com/komodoai/komo_cli/main/komodo_cli/terraform/komodo_manifests/files/cluster-role.yaml
            ```

            **Create Komodo Service Account**

            ```bash
            kubectl apply -f https://raw.githubusercontent.com/komodoai/komo_cli/main/komodo_cli/terraform/komodo_manifests/files/service-account.yaml
            ```

            **Link the Komodo Service Account to the Komodo Cluster Role**

            ```bash
            kubectl apply -f https://raw.githubusercontent.com/komodoai/komo_cli/main/komodo_cli/terraform/komodo_manifests/files/cluster-role-binding.yaml
            ```

            **Create a Komodo Service Account Token**

            ```bash
            kubectl apply -f https://raw.githubusercontent.com/komodoai/komo_cli/main/komodo_cli/terraform/komodo_manifests/files/service-account-token.yaml
            ```
        </Accordion>
        <Accordion title="Obtain and store cluster details" icon="gear">
            To prepare for the next step, you'll need to obtain the URL of your Kubernetes cluster API server and a token to communicate with the cluster.

            <Note>
            This token belongs to the Service Account we created in the Kubernetes cluster
            configuration step.
            </Note>

            First set the `CLUSTER_NAME` environment variable to the name of your cluster.

            <Accordion title="How to get cluster name?">
            Try `kubectl config view | grep -m 1 "name" | awk '{ print $2 }'` command or ask your platform engineer.
            </Accordion>

            ```bash
            export CLUSTER_NAME="my-cluster-name"
            ```

            ##### **host**

            The value for `host` can be obtained in the following way

            ```bash
            kubectl cluster-info $CLUSTER_NAME | grep "control plane" | awk '{ print $NF }'
            ```

            ##### **bearer_token**

            The value for the `bearer_token` can be obtained using the following steps.

            ```bash
            echo "Obtaining the Service Account token for cluster $CLUSTER_NAME"
            echo ""
            TOKEN=$(kubectl get secret komodo-runner-secret --namespace default -o jsonpath='{.data.token}' | base64 -d)
            echo "$TOKEN"
            ```
        </Accordion>
    </Accordion>
    <Accordion title="AWS Batch">
        Follow [these instructions](https://docs.aws.amazon.com/batch/latest/userguide/getting-started-ec2.html) to setup
        AWS Batch (you must use EC2 as the compute backend, NOT Fargate or EKS).

        We recommend setting it up such that there is one compute environment for each instance type that you want to use,
        and then one queue that uses all the compute environments you created (`komo` will allow you to request which instance
        type you want to use for a given job or machine).
    </Accordion>
  </Step>
  <Step title="Create Komodo backends">
    Now that you've setup your backend infrastructure, you now just need to create a Komodo backend to point to your infrastructure.
    A Komodo backend defines what compute service (eg. local, AWS Batch) you want to use for a given job.
    For each backend, you will define 1 or more resources, which specify what type of machine you want to use for a given job
    (eg. using a g4dn.xlarge machine on AWS Batch). You do not need to define resources for Local backends.

    
    You create a backend with the following command:

    ```bash
    komo backend create -t [local | kubernetes | aws-batch] -n my-backend
    ```
    
    Then just follow the instructions to initialize the backend.

    And then for each type of resource you want to use on that backend, run:

    <Tip>You do not need to do this for Local backends</Tip>
    
    ```bash
    komo backend add-resource -b my-backend -n my-resource
    ```

    You will be prompted to enter more information about the compute that you want to use.

    You will reference these backends and resources when launching jobs/machines.
  </Step>
  <Step title="Initialize a Komodo project in your repository">
    Initialize a new Komodo project by running the following command inside your project directory:
    
    ```bash
    komo init project
    ```
    
    This will create a template project configuration in  `.komo/project.yaml`. This will set up
    different configurations for the different backends you created earlier.
    Edit this file to fit your needs (required and recommended fields to edit are marked with `TODO`).
  </Step>
  <Step title="Run Your First Komodo Job">
    You are now ready to run your first job! 
    
    ```bash
    komo run -b my-backend -r my-resource echo "Hello World!"
    ```
    
    [Find full details on this command here.](./komo-cli-reference/command/run)
  </Step>
</Steps>
